<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple SVG Generator - シンプルで確実に動作</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .generator-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .title {
            text-align: center;
            font-size: 2.5em;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 40px;
        }
        
        .input-area {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        #promptInput {
            width: 100%;
            padding: 15px;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1.1em;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        #promptInput:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            outline: none;
        }
        
        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }
        
        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .preview-area {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        #svgContainer {
            width: 100%;
            max-width: 300px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .controls {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .control-row label {
            min-width: 100px;
            color: var(--text-secondary);
        }
        
        .control-row input[type="range"] {
            flex: 1;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        .control-row input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }
        
        .control-row span {
            min-width: 50px;
            color: var(--primary);
            font-weight: 600;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .action-btn {
            padding: 12px 30px;
            background: var(--bg-dark);
            color: var(--text-primary);
            border: 2px solid var(--border);
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .examples {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .example-btn {
            padding: 8px 16px;
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            border: 1px solid var(--primary);
            border-radius: 20px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .example-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        #debugInfo {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 0.9em;
            color: var(--text-secondary);
            display: none;
        }
    </style>
</head>
<body>
    <div class="generator-container">
        <h1 class="title">Simple SVG Generator</h1>
        
        <div class="input-area">
            <h2 style="margin-bottom: 20px;">アイコンを生成</h2>
            
            <div class="examples">
                <button class="example-btn" onclick="setExample('流れる水')">流れる水</button>
                <button class="example-btn" onclick="setExample('回転する歯車')">回転する歯車</button>
                <button class="example-btn" onclick="setExample('輝く星')">輝く星</button>
                <button class="example-btn" onclick="setExample('波のパターン')">波のパターン</button>
                <button class="example-btn" onclick="setExample('螺旋')">螺旋</button>
                <button class="example-btn" onclick="setExample('ハートビート')">ハートビート</button>
            </div>
            
            <input type="text" id="promptInput" placeholder="例: 流れる水、回転する歯車、輝く星...">
            <button class="generate-btn" onclick="generateSimpleSvg()">アイコンを生成</button>
        </div>
        
        <div class="preview-area">
            <div id="svgContainer">
                <p style="color: var(--text-secondary);">プロンプトを入力して生成してください</p>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-row">
                <label>サイズ</label>
                <input type="range" id="size" min="50" max="300" value="200">
                <span id="sizeValue">200</span>
            </div>
            <div class="control-row">
                <label>線の太さ</label>
                <input type="range" id="strokeWidth" min="1" max="10" value="2" step="0.5">
                <span id="strokeValue">2</span>
            </div>
            <div class="control-row">
                <label>色</label>
                <input type="color" id="color" value="#6366f1">
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn" onclick="copySvgCode()">コードをコピー</button>
            <button class="action-btn" onclick="downloadSvgFile()">ダウンロード</button>
            <button class="action-btn" onclick="toggleDebug()">デバッグ</button>
        </div>
        
        <div id="debugInfo"></div>
    </div>
    
    <script>
// シンプルなSVG生成関数
function generateSimpleSvg() {
    const prompt = document.getElementById('promptInput').value.trim().toLowerCase();
    if (!prompt) {
        alert('プロンプトを入力してください');
        return;
    }
    
    const container = document.getElementById('svgContainer');
    container.innerHTML = '<p style="color: var(--text-secondary);">生成中...</p>';
    
    setTimeout(() => {
        const svg = createSvgFromPrompt(prompt);
        displaySvg(svg);
        updateDebugInfo(prompt, svg);
    }, 300);
}

function createSvgFromPrompt(prompt) {
    const paths = [];
    
    // キーワードに基づいてパスを生成
    if (prompt.includes('流れ') || prompt.includes('水')) {
        paths.push(...createFlowPaths());
    } else if (prompt.includes('回転') || prompt.includes('歯車')) {
        paths.push(...createGearPaths());
    } else if (prompt.includes('星')) {
        paths.push(createStarPath());
    } else if (prompt.includes('波')) {
        paths.push(...createWavePaths());
    } else if (prompt.includes('螺旋') || prompt.includes('らせん')) {
        paths.push(createSpiralPath());
    } else if (prompt.includes('ハート')) {
        paths.push(createHeartPath());
    } else {
        // デフォルト: 円形パターン
        paths.push(createCirclePath());
    }
    
    return paths;
}

function createFlowPaths() {
    const paths = [];
    for (let i = 0; i < 3; i++) {
        const y = 30 + i * 30;
        paths.push(`M 10 ${y} Q 30 ${y - 10} 50 ${y} T 90 ${y}`);
    }
    return paths;
}

function createGearPaths() {
    const cx = 50, cy = 50, r1 = 30, r2 = 40;
    const teeth = 8;
    let path = '';
    
    for (let i = 0; i < teeth; i++) {
        const a1 = (i / teeth) * Math.PI * 2;
        const a2 = ((i + 0.5) / teeth) * Math.PI * 2;
        
        const x1 = cx + Math.cos(a1) * r1;
        const y1 = cy + Math.sin(a1) * r1;
        const x2 = cx + Math.cos(a1) * r2;
        const y2 = cy + Math.sin(a1) * r2;
        const x3 = cx + Math.cos(a2) * r2;
        const y3 = cy + Math.sin(a2) * r2;
        const x4 = cx + Math.cos(a2) * r1;
        const y4 = cy + Math.sin(a2) * r1;
        
        if (i === 0) {
            path = `M ${x1} ${y1}`;
        }
        path += ` L ${x2} ${y2} L ${x3} ${y3} L ${x4} ${y4}`;
    }
    
    return [path + ' Z', `M ${cx + 15} ${cy} A 15 15 0 1 1 ${cx - 15} ${cy} A 15 15 0 1 1 ${cx + 15} ${cy}`];
}

function createStarPath() {
    const cx = 50, cy = 50;
    const r1 = 30, r2 = 15;
    const points = 5;
    let path = '';
    
    for (let i = 0; i < points * 2; i++) {
        const angle = (i / (points * 2)) * Math.PI * 2 - Math.PI / 2;
        const r = i % 2 === 0 ? r1 : r2;
        const x = cx + Math.cos(angle) * r;
        const y = cy + Math.sin(angle) * r;
        
        if (i === 0) {
            path = `M ${x} ${y}`;
        } else {
            path += ` L ${x} ${y}`;
        }
    }
    
    return path + ' Z';
}

function createWavePaths() {
    const paths = [];
    for (let i = 0; i < 4; i++) {
        const y = 20 + i * 20;
        const amplitude = 10;
        let path = `M 10 ${y}`;
        
        for (let x = 20; x <= 90; x += 10) {
            const wave = Math.sin((x / 30) * Math.PI) * amplitude;
            path += ` L ${x} ${y + wave}`;
        }
        
        paths.push(path);
    }
    return paths;
}

function createSpiralPath() {
    const cx = 50, cy = 50;
    let path = '';
    const turns = 3;
    const maxRadius = 35;
    
    for (let i = 0; i <= 100; i++) {
        const t = i / 100;
        const angle = t * Math.PI * 2 * turns;
        const radius = t * maxRadius;
        const x = cx + Math.cos(angle) * radius;
        const y = cy + Math.sin(angle) * radius;
        
        if (i === 0) {
            path = `M ${x} ${y}`;
        } else {
            path += ` L ${x} ${y}`;
        }
    }
    
    return path;
}

function createHeartPath() {
    return 'M 50 75 C 30 60, 20 35, 35 25 C 40 20, 45 20, 50 25 C 55 20, 60 20, 65 25 C 80 35, 70 60, 50 75';
}

function createCirclePath() {
    return 'M 50 20 A 30 30 0 1 1 50 80 A 30 30 0 1 1 50 20';
}

function displaySvg(paths) {
    const size = document.getElementById('size').value;
    const strokeWidth = document.getElementById('strokeWidth').value;
    const color = document.getElementById('color').value;
    
    const svg = `
        <svg width="${size}" height="${size}" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            ${paths.map(path => `
                <path d="${path}" 
                      fill="none" 
                      stroke="${color}" 
                      stroke-width="${strokeWidth}" 
                      stroke-linecap="round" 
                      stroke-linejoin="round"/>
            `).join('')}
        </svg>
    `;
    
    document.getElementById('svgContainer').innerHTML = svg;
}

// コントロール
document.getElementById('size').addEventListener('input', (e) => {
    document.getElementById('sizeValue').textContent = e.target.value;
    if (document.querySelector('#svgContainer svg')) {
        generateSimpleSvg();
    }
});

document.getElementById('strokeWidth').addEventListener('input', (e) => {
    document.getElementById('strokeValue').textContent = e.target.value;
    if (document.querySelector('#svgContainer svg')) {
        generateSimpleSvg();
    }
});

document.getElementById('color').addEventListener('input', () => {
    if (document.querySelector('#svgContainer svg')) {
        generateSimpleSvg();
    }
});

function setExample(text) {
    document.getElementById('promptInput').value = text;
    generateSimpleSvg();
}

function copySvgCode() {
    const svg = document.querySelector('#svgContainer svg');
    if (!svg) {
        alert('先にアイコンを生成してください');
        return;
    }
    
    const svgCode = svg.outerHTML;
    navigator.clipboard.writeText(svgCode).then(() => {
        alert('SVGコードをコピーしました！');
    });
}

function downloadSvgFile() {
    const svg = document.querySelector('#svgContainer svg');
    if (!svg) {
        alert('先にアイコンを生成してください');
        return;
    }
    
    const svgData = svg.outerHTML;
    const blob = new Blob([svgData], { type: 'image/svg+xml' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = 'icon.svg';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

function toggleDebug() {
    const debug = document.getElementById('debugInfo');
    debug.style.display = debug.style.display === 'none' ? 'block' : 'none';
}

function updateDebugInfo(prompt, paths) {
    const debug = document.getElementById('debugInfo');
    debug.innerHTML = `
        <strong>プロンプト:</strong> ${prompt}<br>
        <strong>生成パス数:</strong> ${paths.length}<br>
        <strong>パスデータ:</strong><br>
        ${paths.map((path, i) => `Path ${i + 1}: ${path.substring(0, 50)}...`).join('<br>')}
    `;
}

// Enterキーで生成
document.getElementById('promptInput').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        generateSimpleSvg();
    }
});
    </script>
</body>
</html>